credentials:
  system:
    domainCredentials:
    - credentials:
      - usernamePassword:
          id: "BitBucketCred"
          username: "admin"
          password: ""
          scope: GLOBAL
      - string:
          id: "${APIC_DEV_ENV_CREDENTIAL_ID}"
          secret: ""
          scope: GLOBAL
      - string:
          id: "${APIC_SIT_ENV_CREDENTIAL_ID}"
          secret: ""
          scope: GLOBAL
      - usernamePassword:
          id: "APICDevUnitTestCred"
          username: ""
          password: ""
          scope: GLOBAL
jenkins:
  globalNodeProperties:
    - envVars:
        env:
        - key: "APIC_JOB_DSL_REPO_URL"
          value: "${APIC_JOB_DSL_REPO_URL}"
        - key: "APIC_API_INDEX_REPO_URL"
          value: "${APIC_API_INDEX_REPO_URL}"
        - key: "APIC_API_INDEX_REPO_BRANCH"
          value: "${APIC_API_INDEX_REPO_BRANCH}"
        - key: "APIC_PRODUCT_INDEX_REPO_URL"
          value: "${APIC_PRODUCT_INDEX_REPO_URL}"
        - key: "APIC_PRODUCT_INDEX_REPO_BRANCH"
          value: "${APIC_PRODUCT_INDEX_REPO_BRANCH}"
        - key: "APIC_TRUNK_BRANCH_NAME"
          value: "${APIC_TRUNK_BRANCH_NAME}"
        # Bitbucket server
        - key: "BITBUCKET_BASE_URL"
          value: "${BITBUCKET_BASE_URL}"
        - key: "BITBUCKET_CREDENTIAL_ID"
          value: "${BITBUCKET_CREDENTIAL_ID}"
        # APIC UNITTEST environment
        - key: "APIC_UNIT_TEST_ENV_API_URL"
          value: "${APIC_UNIT_TEST_ENV_API_URL}"
        - key: "APIC_UNIT_TEST_ENV_PORG_ID"
          value: "${APIC_UNIT_TEST_ENV_PORG_ID}"
        - key: "APIC_UNIT_TEST_ENV_CREDENTIAL_ID"
          value: "${APIC_UNIT_TEST_ENV_CREDENTIAL_ID}"
        # APIC DEV environment
        - key: "APIC_DEV_ENV_API_URL"
          value: "${APIC_DEV_ENV_API_URL}"
        - key: "APIC_DEV_ENV_PORG_ID"
          value: "${APIC_DEV_ENV_PORG_ID}"
        - key: "APIC_DEV_ENV_CREDENTIAL_ID"
          value: "${APIC_DEV_ENV_CREDENTIAL_ID}"
        # APIC SIT environment
        - key: "APIC_SIT_ENV_API_URL"
          value: "${APIC_SIT_ENV_API_URL}"
        - key: "APIC_SIT_ENV_PORG_ID"
          value: "${APIC_SIT_ENV_PORG_ID}"
        - key: "APIC_SIT_ENV_CATALOG_NAME"
          value: "${APIC_SIT_ENV_CATALOG_NAME}"
        - key: "APIC_SIT_ENV_CREDENTIAL_ID"
          value: "${APIC_SIT_ENV_CREDENTIAL_ID}"
        # APIC STG environment
        - key: "APIC_STAGING_ENV_API_URL"
          value: "${APIC_STAGING_ENV_API_URL}"
        - key: "APIC_STAGING_ENV_PORG_ID"
          value: "${APIC_STAGING_ENV_PORG_ID}"
        - key: "APIC_STAGING_ENV_CRENDENTIAL_ID"
          value: "${APIC_STAGING_ENV_CRENDENTIAL_ID}"
        # APIC PROD environment
        - key: "APIC_PROD_ENV_API_URL"
          value: "${APIC_PROD_ENV_API_URL}"
        - key: "APIC_PROD_ENV_PORG_ID"
          value: "${APIC_PROD_ENV_PORG_ID}"
        - key: "APIC_PROD_ENV_CREDENTIAL_ID"
          value: "${APIC_PROD_ENV_CREDENTIAL_ID}"
  clouds:
    - docker:
        name: "docker"
        dockerApi:
          dockerHost:
            uri: "unix:///var/run/docker.sock"
  agentProtocols:
  - "JNLP4-connect"
  - "Ping"
  authorizationStrategy:
    globalMatrix:
      permissions:
        - "USER:Overall/Administer:admin"
        - "GROUP:Overall/Read:authenticated"
  disableRememberMe: false
  numExecutors: 2
  quietPeriod: 5
  remotingSecurity:
    enabled: true
  scmCheckoutRetryCount: 0
  securityRealm:
    local:
      allowsSignup: false
      enableCaptcha: false
      users:
      - id: "admin"
        name: "Administrator"
        password: "admin"
        properties:
          - mailer:
              emailAddress: "iresh@n-able.biz"
security:
  globalJobDslSecurityConfiguration:
    useScriptSecurity: false
unclassified:
  location:
    adminAddress: "address not configured yet <nobody@nowhere>"
    url: "${JENKINS_URL}"
  globalLibraries:
    libraries:
    - defaultVersion: '1.0.0'
      implicit: true
      name: "apic_jenkins_lib"
      retriever:
        http:
          credentialsId: "BitBucketCred"
          httpURL: "http://lib-zipper:5000/zipper/apic-jenkins-lib"
          preemptiveAuth: false
tool:
  git:
    installations:
    - home: "git"
      name: "Default"
jobs:
  - file: /usr/share/jenkins/ref/initial-jobs/initial-jobs-apic.groovy